<!doctype html>
<html lang="zh-Hans">
  <head>
    <title>Hugo添加utterances评论 // ZechariahZheng&#39;s Blog</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.86.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="ZechariahZheng" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://ZechariahZheng.github.io/css/main.min.88e7083eff65effb7485b6e6f38d10afbec25093a6fac42d734ce9024d3defbd.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hugo添加utterances评论"/>
<meta name="twitter:description" content="参考：https://www.yuque.com/shenweiyan/cookbook/fl1z7t
因为是用 Hugo 搭建的博客，所以只看中了三个评论系统：1、Disqus 2、Valine 3、Utterances
说下三者区别：
  Disqus
   优点：漂亮，hugo 自带，官方文档中有写如何启动，直接在 config.toml 文件中启用就可以用。 缺点：广告多，国外的，容易被墙。    Valine
   官方的介绍说，是一款快速、简洁且高效的无后端评论系统。对于第三方评论系统，经历了多说关闭的影响，不太敢用。具体如何本人的确也没用过，暂不评论。    Utterances
   优点：基于 GitHub issues 的评论工具，开源免费，加载快，配置较简单，没有广告，没有追踪（很多评论系统有追踪，感觉不是很尊重访客隐私）。 缺点：貌似不能在已经发表的评论中追加评论。    好像三个都支持 Markdown 。
1. 创建公开的仓库 在 github 创建一个公开的仓库。
2. 安装 utterances app 通过 https://utteranc.es/ 主页的 configuration → Repository 进入 utterances app 主页（或者直接在浏览器输入 https://github.com/apps/utterances 进入）。
3. 配置 utterances utterances app 安装完成后，回到 https://utteranc."/>

    <meta property="og:title" content="Hugo添加utterances评论" />
<meta property="og:description" content="参考：https://www.yuque.com/shenweiyan/cookbook/fl1z7t
因为是用 Hugo 搭建的博客，所以只看中了三个评论系统：1、Disqus 2、Valine 3、Utterances
说下三者区别：
  Disqus
   优点：漂亮，hugo 自带，官方文档中有写如何启动，直接在 config.toml 文件中启用就可以用。 缺点：广告多，国外的，容易被墙。    Valine
   官方的介绍说，是一款快速、简洁且高效的无后端评论系统。对于第三方评论系统，经历了多说关闭的影响，不太敢用。具体如何本人的确也没用过，暂不评论。    Utterances
   优点：基于 GitHub issues 的评论工具，开源免费，加载快，配置较简单，没有广告，没有追踪（很多评论系统有追踪，感觉不是很尊重访客隐私）。 缺点：貌似不能在已经发表的评论中追加评论。    好像三个都支持 Markdown 。
1. 创建公开的仓库 在 github 创建一个公开的仓库。
2. 安装 utterances app 通过 https://utteranc.es/ 主页的 configuration → Repository 进入 utterances app 主页（或者直接在浏览器输入 https://github.com/apps/utterances 进入）。
3. 配置 utterances utterances app 安装完成后，回到 https://utteranc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ZechariahZheng.github.io/posts/hugo%E6%B7%BB%E5%8A%A0utterances%E8%AF%84%E8%AE%BA/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-13T15:36:16+08:00" />
<meta property="article:modified_time" content="2021-01-13T15:36:16+08:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://ZechariahZheng.github.io/"><img class="app-header-avatar" src="/images/1.jpg" alt="ZechariahZheng" /></a>
      <h1>ZechariahZheng&#39;s Blog</h1>
      <p>吾魂兮无求乎永生，竭尽兮人事之所能</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/ZechariahZheng" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Hugo添加utterances评论</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jan 13, 2021
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>参考：https://www.yuque.com/shenweiyan/cookbook/fl1z7t</p>
<p>因为是用 Hugo 搭建的博客，所以只看中了三个评论系统：1、<code>Disqus</code> 2、<code>Valine</code> 3、<code>Utterances</code></p>
<p>说下三者区别：</p>
<ul>
<li>
<p><strong>Disqus</strong></p>
</li>
<li>
<ul>
<li>优点：漂亮，hugo 自带，<a href="https://gohugo.io/templates/internal/#configure-disqus">官方文档</a>中有写如何启动，直接在 <code>config.toml</code> 文件中启用就可以用。</li>
<li>缺点：广告多，国外的，容易被墙。</li>
</ul>
</li>
<li>
<p><strong>Valine</strong></p>
</li>
<li>
<ul>
<li>官方的介绍说，是一款快速、简洁且高效的无后端评论系统。对于第三方评论系统，经历了多说关闭的影响，不太敢用。具体如何本人的确也没用过，暂不评论。</li>
</ul>
</li>
<li>
<p><strong>Utterances</strong></p>
</li>
<li>
<ul>
<li>优点：基于 GitHub issues 的评论工具，开源免费，加载快，配置较简单，没有广告，没有追踪（很多评论系统有追踪，感觉不是很尊重访客隐私）。</li>
<li>缺点：貌似不能在已经发表的评论中追加评论。</li>
</ul>
</li>
</ul>
<p>好像三个都支持 <code>Markdown</code> 。</p>
<h2 id="1-创建公开的仓库">1. 创建公开的仓库</h2>
<p>在 github 创建一个公开的仓库。</p>
<h2 id="2-安装-utterances-app">2. 安装 utterances app</h2>
<p>通过 <a href="https://utteranc.es/">https://utteranc.es/</a> 主页的 <strong>configuration</strong> → <strong>Repositor</strong>y 进入 <a href="https://github.com/apps/utterances">utterances app</a> 主页（或者直接在浏览器输入 <a href="https://github.com/apps/utterances">https://github.com/apps/utterances</a> 进入）。</p>
<h2 id="3-配置-utterances">3. 配置 utterances</h2>
<p><a href="https://github.com/apps/utterances">utterances app</a> 安装完成后，回到 <a href="https://utteranc.es/">https://utteranc.es/</a> 页面，设置 <strong>Repository</strong>、<strong>Blog Post</strong> ↔️ <strong>Issue Mapping</strong>、<strong>Theme</strong> 的信息，完成后把生成的 Enable Utterances js 代码添加到博客的评论系统。有两种方式添加，具体情况看个人（推荐第二种）。</p>
<ul>
<li><strong>最简单但是不能够随意开启，不能个性化设置。</strong></li>
</ul>
<p>直接从<a href="https://utteranc.es/">官方</a>或者从下方复制代码片段粘贴到相应的评论的 html 模板文件的相应位置即可。其中 <code>[ENTER REPO HERE</code> 填写格式为 <code>owner/repo</code> ，比如我的就是 <code>shenweiyan/issues</code> 。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://utteranc.es/client.js&#34;</span>
        <span style="color:#a6e22e">repo</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[ENTER REPO HERE]&#34;</span>
        <span style="color:#a6e22e">issue</span><span style="color:#f92672">-</span><span style="color:#a6e22e">term</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pathname&#34;</span>
        <span style="color:#a6e22e">theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;github-light&#34;</span>
        <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>
        <span style="color:#66d9ef">async</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</code></pre></div><ul>
<li><strong>模块化，可设置开启关闭，便于管理。</strong></li>
</ul>
<p>首先，在 <code>themes/your-theme/layouts/partials/</code>，或者 <code>myblog/layouts/partials/</code> 下创建个 <code>utterances.html</code> 文件，以我的为例就是 <code>shen.bioinit.com/layouts/partials/utterances.html</code> ，然后复制下面的代码 copy 进去，保存。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ if and ( .Site.Params.utteranc.enable ) (and (not .Params.disable_comments) (or (eq .Kind &#34;404&#34;) (and (not .IsHome) .Content))) }}
&lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;comments&#34;</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://utteranc.es/client.js&#34;</span>
        <span style="color:#a6e22e">repo</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Site.Params.utteranc.repo }}&#34;</span>
        <span style="color:#a6e22e">issue-term</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Site.Params.utteranc.issueTerm }}&#34;</span>
        <span style="color:#a6e22e">theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Site.Params.utteranc.theme }}&#34;</span>
        <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>
        <span style="color:#a6e22e">async</span>&gt;
&lt;/<span style="color:#f92672">script</span>&gt;
&lt;/<span style="color:#f92672">section</span>&gt;
{{ end }}
</code></pre></div><p>其中 <code>section</code> 标签的 <code>class</code> 属性可以选择你已有的 <code>class</code>，没有的话请置空。或者你也可以把 <code>section</code> 标签换成 `` 。</p>
<p>然后，在 <code>config.toml</code> 文件中添加相关的参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">utteranc</span>]
<span style="color:#a6e22e">enable</span> = <span style="color:#66d9ef">true</span>
<span style="color:#a6e22e">repo</span> = <span style="color:#e6db74">&#34;shenweiyan/issues&#34;</span>    <span style="color:#75715e"># 存储评论的Repo，格式为 owner/repo</span>
<span style="color:#a6e22e">issueTerm</span> = <span style="color:#e6db74">&#34;title&#34;</span>           <span style="color:#75715e"># 表示你选择以那种方式让github issue的评论和你的文章关联可以选择默认的pathname。</span>
<span style="color:#a6e22e">theme</span> = <span style="color:#e6db74">&#34;github-light&#34;</span>        <span style="color:#75715e"># 样式主题</span>
</code></pre></div><p>第三，在相关的模板文件中添加一段代码 <code>{{ partial &quot;utterances.html&quot; . }}</code> ，即可完成 utterances 设置。以我的博客为例，即 <code>shen.bioinit.com/layouts/partials/foot_custom.html</code> 文件。</p>
<p>第四，执行 <code>hugo</code>，重新生成静态博客文件，push 到 github，就可以看到 utterances 评论的的效果。如果在某些页面（如首页），你想要禁用评论功能，可以在 md 文件的头部加入 <code>disable_comments: true</code> 即可；不加，默认开启评论。</p>
<h2 id="4-utterances-相关参数配置">4. Utterances 相关参数配置</h2>
<ul>
<li>
<p><code>repo</code> : 格式为 <code>owner/repo</code> 即 <code>用户名/仓库名</code>，千万不要填错了。</p>
</li>
<li>
<p><code>issue-term</code>：映射配置，有以下几种设置可供使用(个人使用的 title)。</p>
</li>
<li>
<ul>
<li>pathname</li>
<li>url</li>
<li>title</li>
<li>og:title</li>
<li>issue-number</li>
<li>specific-term</li>
</ul>
</li>
<li>
<p><code>theme</code>：也就是主题，一白五黑，我白色主题没得选。</p>
</li>
<li>
<ul>
<li>github-light</li>
<li>github-dark</li>
<li>github-dark-orange</li>
<li>icy-dark</li>
<li>dark-blue</li>
<li>photon-dark</li>
</ul>
</li>
</ul>

    </div>
    <div class="post-footer">
      
      
      
<section>
<script src="https://utteranc.es/client.js"
        repo="ZechariahZheng/hugoblogtalks"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</section>

    </div>
  </article>

    </main>
  </body>
</html>
